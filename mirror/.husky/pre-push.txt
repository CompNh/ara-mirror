#!/usr/bin/env sh
# main 직푸시 차단
branch="$(git symbolic-ref --short HEAD 2>/dev/null)"
if [ "$branch" = "main" ]; then
  echo "❌ Direct push to 'main' is blocked by local guard."
  echo "➡️  Create a feature branch and open a Pull Request instead."
  exit 1
fi

# 변경 패키지만 테스트 (테스트 파일 없어도 통과)
pnpm run test:changed -- --coverage --passWithNoTests
